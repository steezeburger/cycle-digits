# cycle-digits

Cycles through the digits 0-9 using the macropad's RGBs. My version of a 
"hello world" program for my new
[Adafruit MacroPad RP2040](https://www.adafruit.com/product/5128), in Rust!

This repo was generated from https://github.com/rp-rs/rp2040-project-template.
If you're familiar with this template, you'll notice that I am not using the
default runner. I changed the definition in `.cargo/config.toml` to use
`runner = "elf2uf2-rs -d"`. This allows me to flash the program to the RP2040
when it is in USB Bootloader mode.

## dependencies

* hardware
  * <https://www.adafruit.com/product/5128>
  * check Digi-Key if Adafruit is out of stock
* [Rust](https://www.rust-lang.org/tools/install)
* thumbv6m-none-eabi target
* elf2uf2-rs

## setup

Ensure you have the latest stable version of Rust installed, and the right
target support. We also need `flip-link`, which allows you to detect
stack-overflows on the first core, which is the only supported target for now.
```sh
rustup self update
rustup update stable
rustup target add thumbv6m-none-eabi
cargo install flip-link
```

Install elf2uf2-rs so that the ELF generated by Rust can be converted to a UF2
file and flashed to the RP2040 when it is in USB Bootloader mode.
```sh
cargo install elf2uf2-rs --locked
```

## running

> NOTE: Ensure your macropad is in USB Bootloader mode! Hold the rotary encoder
button down, press and release the reset button on the side, and continue
holding the rotary encoder button down until the macropad shows up as a USB
drive. Now the build process can flash the program to the macropad. 

```sh
cargo run --release
```
